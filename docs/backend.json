{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "type": "object",
      "description": "Represents a user's public profile and basic information.",
      "properties": {
        "uid": { "type": "string", "description": "The user's unique ID." },
        "name": { "type": "string", "description": "The user's display name." },
        "email": { "type": "string", "format": "email" },
        "balance": { "type": "number", "description": "The user's current account balance." },
        "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp of account creation."},
        "referralCode": { "type": "string", "description": "The user's unique referral code." },
        "referrerId": { "type": "string", "description": "The UID of the user who referred them." }
      },
      "required": ["uid", "name", "email", "balance", "createdAt", "referralCode"]
    },
    "InvestmentMachine": {
      "title": "Investment Machine",
      "type": "object",
      "description": "Configuration for a type of investment machine.",
      "properties": {
        "name": { "type": "string" },
        "price": { "type": "number" },
        "totalReturn": { "type": "number" },
        "cycleDays": { "type": "number" }
      },
      "required": ["name", "price", "totalReturn", "cycleDays"]
    },
    "UserInvestment": {
      "title": "User Investment",
      "type": "object",
      "description": "Represents a user's active investment in a machine.",
      "properties": {
        "machineId": { "type": "string" },
        "purchaseDate": { "type": "string", "format": "date-time" },
        "machineName": { "type": "string" },
        "machinePrice": { "type": "number" },
        "machineTotalReturn": { "type": "number" },
        "machineCycleDays": { "type": "number" }
      },
      "required": ["machineId", "purchaseDate", "machineName", "machinePrice", "machineTotalReturn", "machineCycleDays"]
    },
    "Token": {
      "title": "Redemption Token",
      "type": "object",
      "description": "A token that can be redeemed for account balance.",
      "properties": {
        "code": { "type": "string", "description": "The unique token code." },
        "value": { "type": "number", "description": "The monetary value of the token." },
        "isRedeemed": { "type": "boolean", "description": "Whether the token has been used." },
        "redeemedBy": { "type": "string", "description": "UID of the user who redeemed it." },
        "redeemedAt": { "type": "string", "format": "date-time", "description": "Timestamp of redemption."}
      },
      "required": ["code", "value", "isRedeemed"]
    },
    "Referral": {
      "title": "Referral",
      "type": "object",
      "description": "Represents a referral made by a user.",
      "properties": {
        "referredUserId": { "type": "string", "description": "The UID of the user who was referred." },
        "referredUserName": { "type": "string", "description": "The name of the user who was referred." },
        "status": { "type": "string", "enum": ["pending", "completed"], "description": "The status of the referral." },
        "reward": { "type": "number", "description": "The reward given for the referral." },
        "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp of when the referral was made."}
      },
      "required": ["referredUserId", "referredUserName", "status", "createdAt"]
    }
  },
  "auth": {
    "providers": ["password", "google.com"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": { "$ref": "#/entities/UserProfile" },
          "description": "Stores user profiles. The document ID is the user's UID."
        }
      },
      {
        "path": "/users/{userId}/investments/{investmentId}",
        "definition": {
          "entityName": "UserInvestment",
          "schema": { "$ref": "#/entities/UserInvestment" },
          "description": "Subcollection for a user's active investments."
        }
      },
      {
        "path": "/investmentMachines/{machineId}",
        "definition": {
          "entityName": "InvestmentMachine",
          "schema": { "$ref": "#/entities/InvestmentMachine" },
          "description": "Global list of available investment machines. Should be read-only for clients."
        }
      },
      {
        "path": "/tokens/{tokenId}",
        "definition": {
          "entityName": "Token",
          "schema": { "$ref": "#/entities/Token" },
          "description": "Top-level collection for all redemption tokens."
        }
      },
      {
        "path": "/users/{userId}/referrals/{referralId}",
        "definition": {
          "entityName": "Referral",
          "schema": { "$ref": "#/entities/Referral" },
          "description": "Subcollection for users referred by this user."
        }
      }
    ]
  }
}
